{
  "action_id": "marketplace/julia-actions/julia-buildpkg",
  "version_id": "7869b3caa849",
  "source": {
    "type": "marketplace",
    "action_yml_path": "blueprints/marketplace/julia-actions/julia-buildpkg/action.yml",
    "origin": "github.com/julia-actions/julia-buildpkg",
    "publisher": "julia-actions",
    "verified": false,
    "latest_release": {
      "tag_name": "v1.7.0",
      "name": "v1.7.0",
      "published_at": "2024-11-20T23:23:40Z",
      "html_url": "https://github.com/julia-actions/julia-buildpkg/releases/tag/v1.7.0",
      "prerelease": false,
      "draft": false
    }
  },
  "definition": {
    "name": "Run Pkg.build",
    "description": "Run the build step in a Julia package",
    "author": "David Anthoff",
    "inputs": [
      {
        "name": "project",
        "required": false,
        "default": "@.",
        "description": "Value passed to the --project flag. The default value is the repository root: \"@.\""
      },
      {
        "name": "precompile",
        "required": false,
        "default": "no",
        "description": "Whether to allow auto-precompilation (via the `JULIA_PKG_PRECOMPILE_AUTO` env var). Options: yes | no. Default value: no."
      },
      {
        "name": "localregistry",
        "required": false,
        "default": "",
        "description": "Add local registries hosted on GitHub. Specified by providing the url (https/ssh) to the repositories as a newline (\\n) seperated list. User is responsible for setting up the necessary SSH-Keys to access the repositories if necessary."
      },
      {
        "name": "git_cli",
        "required": false,
        "default": "false",
        "description": "Determine if Pkg uses the cli git executable (Julia >= 1.7). Might be necessary for more complicated SSH setups. Options: true | false. Default : false"
      },
      {
        "name": "ignore-no-cache",
        "required": false,
        "default": "false",
        "description": "Whether to ignore if there appears to be no depot caching. Silences an action notice recommending `julia-actions/cache`."
      }
    ],
    "outputs": [],
    "runs": {
      "using": "composite",
      "steps": [
        {
          "name": "Set and export registry flavor preference",
          "run": "echo \"JULIA_PKG_SERVER_REGISTRY_PREFERENCE=${JULIA_PKG_SERVER_REGISTRY_PREFERENCE:-eager}\" >> ${GITHUB_ENV}",
          "shell": "bash"
        },
        {
          "run": "if \"${{ inputs.ignore-no-cache }}\" == \"false\" && !isdir(DEPOT_PATH[1])\n    println(\"::notice title=[julia-buildpkg] Caching of the julia depot was not detected ::Consider using `julia-actions/cache` to speed up runs https://github.com/julia-actions/cache To ignore, set input `ignore-no-cache: true` \")\nend\nimport Pkg\n\n# Determine if Pkg uses git-cli executable instead of LibGit2\nVERSION >= v\"1.7-\" && (ENV[\"JULIA_PKG_USE_CLI_GIT\"] = ${{ inputs.git_cli }})\n\nif VERSION < v\"1.7-\" && ${{ inputs.git_cli }} == true\n  printstyled(\"::notice::JULIA_PKG_USE_CLI_GIT requires Julia >= 1.7. Using default LibGit2 git-interface instead! \\n\"; color = :yellow)\nend\n\n\nif VERSION >= v\"1.5-\"\n    if VERSION >= v\"1.8-\"\n        # Install the default registries\n        Pkg.Registry.add()\n    else\n        Pkg.Registry.add(\"General\")\n    end\n\n    # If provided add local registries\n    if !isempty(\"${{ inputs.localregistry }}\")\n      local_repos = split(\"${{ inputs.localregistry }}\", \"\\n\") .|> string\n      for repo_url in local_repos\n        isempty(repo_url) && continue\n        Pkg.Registry.add(Pkg.RegistrySpec(; url = repo_url))\n      end\n    end\nend\n\nVERSION >= v\"1.1.0-rc1\" ? retry(Pkg.build)(verbose=true) : retry(Pkg.build)()\n",
          "shell": "julia --color=yes --project=${{ inputs.project }} {0}",
          "env": {
            "JULIA_PKG_PRECOMPILE_AUTO": "${{ inputs.precompile }}",
            "GITHUB_TOKEN": "${{ github.token }}"
          }
        }
      ]
    }
  },
  "annotations": {
    "categories": [
      "Build",
      "Dependency management"
    ],
    "confidence": "high",
    "evidence": [
      {
        "type": "llm_categorization",
        "model": "gpt-4o-mini",
        "primary_category": "Build",
        "reasoning": "The action is focused on building a Julia package, which directly relates to the Build category. Additionally, it involves managing dependencies through package registries, placing it in the Dependency management category as well.",
        "tags": [
          "Julia",
          "build",
          "packaging",
          "dependencies",
          "CI"
        ]
      }
    ]
  },
  "cache": {
    "source_hash": "7869b3caa849ac28acb4e05d7f01a6d8fd2bc166d672cf44d09bc1328c50ad19",
    "taxonomy_version": "0.0.1",
    "prompt_version": "v1",
    "generated_at": "2025-12-15T05:22:23.581606Z"
  }
}
